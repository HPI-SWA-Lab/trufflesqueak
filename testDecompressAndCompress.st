testDecompressAndCompress
	"Test compression and decompression by deserializing the squeak icon form and then serializing it."

	| bitmap sourceArray destArray |
	bitmap := Bitmap new: 384.
	"the squeak icon form serialized"
	sourceArray := ByteArray readHexFrom: 'e180090013040000017b0000016a0000013500000131000f600000016c00000160000001150017360000013500000100000000560000012f000001290013660000011c000001000000006700000115000b3c0000012a00000109000b710000010e00000121000b48000001320000010900076700000115000b2c0000013b00000109000b0a0000016f0000011d000b05000001700000010d00076800000115000b1c0000014b0000010d000b5c0000011f00000119000b5c000001140000010d00076900000115000b01000001620000010d000b0200000104000001190007020000011100076b000001190007660000011500070700000125000b06000001640000011900076800000111000fb4000001ef0000013f00000109000f41000001bf0000014f0000010d000a3500000119000b5300000115000001090007260000010aff000001079e00000109000fc9000001ff000001e00000010d000b5d0000010700000129001308000001f2000001ff0000017300000109000fbe000001ff000001d600000141000f2a0000015e0000010500000109000f2e0000019f00000139000001290053160000013a0000015e00000167000001660000014f000001300000010d0000010000000033000001370000010100000100000000100000012f0000014e0000015f0000013f0000011a0000010100000109002f5600000169000001540000012f00000112000001340000014300000161000001730000013a000001790000010aff0000012f810000013e000001740000015e000001380000011b000001290000014f0000016a0000016b00000153000001090027330000016b0000016400000133000001250000011a0000011d00000111000001790000010aff00000127810000011d0000013d0000013700000145000001530000016e000001680000011d00000109007b0c000001780000013c0000010000000021000001650000016a00000165000001670000012c000001000000003300000137000001010000012c00000167000001680000016a000001580000010f000001070000015800000170000001090000010000000001000001000000001d000001550000010100000131001b0e000001670000011d000001000000000a00000103000001'.
	self decompress: bitmap fromByteArray: sourceArray at: 1.
	destArray := ByteArray new: sourceArray size.
	self compress: bitmap toByteArray: destArray.
	self should: destArray = sourceArray
